<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>elbowH的博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="记录学习过程">
    
    <link rel="preload" href="/mynotes/assets/css/0.styles.1c00a5d2.css" as="style"><link rel="preload" href="/mynotes/assets/js/app.f65f9fb1.js" as="script"><link rel="preload" href="/mynotes/assets/js/2.7a2c11e9.js" as="script"><link rel="preload" href="/mynotes/assets/js/10.7ac305b1.js" as="script"><link rel="prefetch" href="/mynotes/assets/js/11.36532f04.js"><link rel="prefetch" href="/mynotes/assets/js/12.75928cce.js"><link rel="prefetch" href="/mynotes/assets/js/13.50300c4e.js"><link rel="prefetch" href="/mynotes/assets/js/14.23c58989.js"><link rel="prefetch" href="/mynotes/assets/js/15.7f2952d0.js"><link rel="prefetch" href="/mynotes/assets/js/16.c6c9a35b.js"><link rel="prefetch" href="/mynotes/assets/js/17.026a9b21.js"><link rel="prefetch" href="/mynotes/assets/js/18.33a22882.js"><link rel="prefetch" href="/mynotes/assets/js/19.5bae9800.js"><link rel="prefetch" href="/mynotes/assets/js/3.10239fd0.js"><link rel="prefetch" href="/mynotes/assets/js/4.6de9dd4b.js"><link rel="prefetch" href="/mynotes/assets/js/5.dba54d81.js"><link rel="prefetch" href="/mynotes/assets/js/6.f54abc5a.js"><link rel="prefetch" href="/mynotes/assets/js/7.c1be93cc.js"><link rel="prefetch" href="/mynotes/assets/js/8.7beb05ff.js"><link rel="prefetch" href="/mynotes/assets/js/9.ece7952f.js">
    <link rel="stylesheet" href="/mynotes/assets/css/0.styles.1c00a5d2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mynotes/" class="home-link router-link-active"><!----> <span class="site-name">elbowH的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mynotes/" class="nav-link">
  主页
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mynotes/" class="nav-link">
  主页
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>JVM</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/mynotes/java/Java基础知识.html" class="sidebar-link">Java基础知识</a></li><li><a href="/mynotes/java/J2EE基础知识.html" class="sidebar-link">J2EE基础知识</a></li><li><a href="/mynotes/java/Java-Calendar.html" class="sidebar-link">Java-Calendar</a></li><li><a href="/mynotes/java/JDK7新特性概览.html" class="active sidebar-link">JDK7新特性概览</a></li><li><a href="/mynotes/java/Java-Fork-Join-框架.html" class="sidebar-link">Java-Fork-Join-框架</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#classloader-新增-api">ClassLoader 新增 API</a><ul><li><a href="#urlclassloader-新增-api">URLClassLoader 新增 API</a></li><li><a href="#concurrent-包的改进">Concurrent 包的改进</a></li><li><a href="#国际化-i18n">国际化（i18n）</a></li></ul></li><li><a href="#java-平台的更多新-nio-2-的-api-jsr-203">Java 平台的更多新 NIO 2 的 API（JSR 203）</a></li><li><a href="#支持-zip-jar-的-filesystemprovider-实现">支持 zip/jar 的 FileSystemProvider 实现</a><ul><li><a href="#sdp-socket-direct-protocol">SDP(Socket Direct Protocol)</a></li><li><a href="#使用-windows-vista-上的-ipv6-栈">使用 Windows Vista 上的 IPv6 栈</a></li></ul></li><li><a href="#图形界面客户端">图形界面客户端</a><ul><li><a href="#swing-的-nimbus-外观感觉">Swing 的 Nimbus 外观感觉</a></li><li><a href="#jlayer">JLayer</a></li><li><a href="#混合重量级和轻量级组件">混合重量级和轻量级组件</a></li><li><a href="#不规则和透明窗体">不规则和透明窗体</a></li></ul></li><li><a href="#其他模块">其他模块</a><ul><li><a href="#xml">XML</a></li><li><a href="#java-2d">Java 2D</a></li><li><a href="#安全-加密">安全 / 加密</a></li><li><a href="#数据库连接-jdbc">数据库连接 （JDBC）</a></li></ul></li><li><a href="#ibm-jdk-7-新特性">IBM JDK 7 新特性</a></li><li><a href="#总结">总结</a></li></ul></div><p></p> <h1 id="jsr292-支持动态类型语言-invokedynamic"><a href="#jsr292-支持动态类型语言-invokedynamic" class="header-anchor">#</a> JSR292：支持动态类型语言（InvokeDynamic）</h1> <p><img src="/mynotes/assets/img/1240.d9ce4e0c.jpg" alt="图 1. 项目图标－－达芬奇设计的直升机"></p> <p>近年来越来越多的基于 JVM 的动态语言的出现，对于 JVM 提出了新的需求和挑战。其实在 JDK6 中就已经支持 JSR223：Java 平台上的脚本语言，通过一个脚本语言引擎在 JVM 上执行 JavaScript 等脚本语言。但由于 JVM 本身的设计原来是针对 Java 这种静态类型语言的，所以脚本语言无论是解释执行，或者是编译时用虚拟类型，还是运用反射机制，都会对执行效率产生很大程度的影响。</p> <p>JSR292 的实现增加了一个 InvokeDynamic 的字节码指令来支持动态类型语言，使得在把源代码编译成字节码时并不需要确定方法的签名，即方法参数的类型和返回类型。当运行时执行 InvokeDynamic 指令时，JVM 会通过新的动态链接机制 Method Handles，寻找到真实的方法。</p> <p>有了 InvokeDynamic，动态类型语言在 JVM 上的执行速度得到了大大提升，具体的实现细节和实例将在今后的系列文章中有详细介绍。</p> <p>#G1 垃圾回收器（Garbage-First Collector）
G1 垃圾回收器是一个服务器端的垃圾回收器，针对大内存多核 CPU 的环境，目的在于减少 Full GC 带来的暂停次数，增加吞吐量。从长远来看，G1 会代替 Concurrent Mark-Sweep Collector（CMS）。实现上，G1 在堆上分配一系列相同大小的连续区域，然后在回收时先扫描所有的区域，按照每块区域内存活对象的大小进行排序，优先处理存活对象小的区域，即垃圾对象最多的区域，这也是 Garbage First 这个名称的由来。G1 把要收集的区域内的存活对象合并并且复制到其他区域，从而避免了 CMS 遇到的内存碎片问题。此外，G1 采用了一个可预测暂停时间模型来达到软实时的要求。
#JSR334：小的语言改进（Project Coin）
Coin 项目提供了一系列语言上的改进，为 Java 开发者提供了更多的便利。其中包括了支持 String 的 switch 语句，在 try 之后自动关闭资源（try-with-resources），更简洁的泛型，数字可以用下划线分割和多重 catch 的改进等等。</p> <h1 id="核心类库改进"><a href="#核心类库改进" class="header-anchor">#</a> 核心类库改进</h1> <h2 id="classloader-新增-api"><a href="#classloader-新增-api" class="header-anchor">#</a> ClassLoader 新增 API</h2> <p>为了防止自定义多线程 ClassLoad 产生的死锁问题，java.lang.ClassLoader 类增加了以下 API。</p> <h3 id="urlclassloader-新增-api"><a href="#urlclassloader-新增-api" class="header-anchor">#</a> URLClassLoader 新增 API</h3> <p>URLClassLoader 新增 close 方法可以关闭该类加载器打开的资源。</p> <h3 id="concurrent-包的改进"><a href="#concurrent-包的改进" class="header-anchor">#</a> Concurrent 包的改进</h3> <p>java.util.concurrent 包引入了一个轻量级的 fork/join 的框架来支持多核多线程的并发计算。此外，实现了 Phaser 类，它类似于 CyclicBarrier 和 CountDownLatch,但更灵活。最后，ThreadLocalRandom 类提供了线程安全的伪随机数生成器。</p> <h3 id="国际化-i18n"><a href="#国际化-i18n" class="header-anchor">#</a> 国际化（i18n）</h3> <p>支持 Unicode 6.0。改进 java.util.Locale 以支持 IETF BCP 47 和 UTR 35，并且在 get/set locale 的时候分成了用于显示的 locale 和用于格式化的 locale。</p> <h1 id="i-o-与网络"><a href="#i-o-与网络" class="header-anchor">#</a> I/O 与网络</h1> <h2 id="java-平台的更多新-nio-2-的-api-jsr-203"><a href="#java-平台的更多新-nio-2-的-api-jsr-203" class="header-anchor">#</a> Java 平台的更多新 NIO 2 的 API（JSR 203）</h2> <p>NIO2 主要包括了 3 个方面的改进：</p> <ol><li>新的文件系统 API 支持大量文件属性的访问、文件系统监控服务、平台相关的 API，如 DosFileAttributes 和 PosixFileAttributes 等，以及一个可插拔文件系统的 SPI。</li> <li>Socket 和文件的异步 IO。</li> <li>Socket channel 的功能完善，支持 binding、多播等。</li></ol> <h2 id="支持-zip-jar-的-filesystemprovider-实现"><a href="#支持-zip-jar-的-filesystemprovider-实现" class="header-anchor">#</a> 支持 zip/jar 的 FileSystemProvider 实现</h2> <p>NIO2 提供了新的 service provider java.nio.file.spi.FileSystemProvider 来实现一个文件系统，并在 demo 中提供了一个 zip/jar 的文件系统示例。</p> <p>SCTP(Stream Control Transmission Protocol)</p> <p>实现了 SCTP 协议，即流控制传输协议，由 RFC 2960 规范。它是一种类似于 TCP 的可靠传输协议。SCTP 在两个端点之间提供稳定、有序的数据传递服务（非常类似于 TCP），并且可以保护数据消息边界（例如 UDP）。然而，与 TCP 和 UDP 不同，SCTP 是通过多宿主（Multi-homing）和多流（Multi-streaming）功能提供这些收益的，这两种功能均可提高可用性 。</p> <h3 id="sdp-socket-direct-protocol"><a href="#sdp-socket-direct-protocol" class="header-anchor">#</a> SDP(Socket Direct Protocol)</h3> <p>SDP，套接字定向协议，提供了高吞吐量低延迟的高性能网络连接。它的设计目标是为了使得应用程序能够透明地利用 RDMA(Remote Direct Memory Access) 通信机制来加速传统的 TCP/IP 网络通信。最初 SDP 由 Infiniband 行业协会的软件工作组所指定，主要针对 Infiniband 架构，后来 SDP 发展成为利用 RDMA 特性进行传输的重要协议。JDK7 这次实现 Solaris 和 Linux 平台上的 SDP。</p> <h3 id="使用-windows-vista-上的-ipv6-栈"><a href="#使用-windows-vista-上的-ipv6-栈" class="header-anchor">#</a> 使用 Windows Vista 上的 IPv6 栈</h3> <p>更新了网络方面的代码，在 Windows Vista 上，当 IPv6 栈可用时，优先使用 IPv6 栈。</p> <h2 id="图形界面客户端"><a href="#图形界面客户端" class="header-anchor">#</a> 图形界面客户端</h2> <h3 id="swing-的-nimbus-外观感觉"><a href="#swing-的-nimbus-外观感觉" class="header-anchor">#</a> Swing 的 Nimbus 外观感觉</h3> <p>Nimbus 是 Swing 上新一代的跨平台外观感觉 (Look &amp; Feel)。其实 Nimbus 在 Java 6 中已经存在，但直到 Java 7 才被移到了标准 Swing 的名字空间（javax.swing）。原来 Java 中的默认的跨平台外观感觉是“金属”（Metal）或者被称为 Java 外观感觉。Nimbus 起初作为一个开源的项目，它使用 Java2D 矢量绘图而不是点阵图片来渲染图形界面控件，因而使得图形界面控件可以精确地被任意缩放。这个特性特别符合现代富客户端图形控件的发展趋势。以下图片是 JDK 自带的 SwingSet2 演示使用 Nimbus 外观感觉的效果。</p> <h5 id="图-2-swingset2-使用-nimbus-的效果"><a href="#图-2-swingset2-使用-nimbus-的效果" class="header-anchor">#</a> 图 2. SwingSet2 使用 Nimbus 的效果</h5> <p><img src="/mynotes/assets/img/1240-16841452061732.82e8008f.jpg" alt="图 2. SwingSet2 使用 Nimbus 的效果"></p> <p>更多详细教程，可以参考 <a href="http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html" target="_blank" rel="noopener noreferrer">Numbus 官方教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="jlayer"><a href="#jlayer" class="header-anchor">#</a> JLayer</h3> <p>通常情况下，自定义图形控件的绘制需要覆写控件的绘图方法，但是很多情况下这不是一个好办法。于是，JLayer 类应运而生，它可以被装饰在已有的 Swing 组件上。这样界面组件不需要被修改就可以完成自定义渲染和事件响应。一个例子是给一个窗口的所有控件装饰自定义的背景，比如模糊界面所有像素。如果你对此感兴趣，可以参考 <a href="http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html" target="_blank" rel="noopener noreferrer">JLayer 官方教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="混合重量级和轻量级组件"><a href="#混合重量级和轻量级组件" class="header-anchor">#</a> 混合重量级和轻量级组件</h3> <p>在 Java 图形控件中有两类，重量级（heavyweight）和轻量级（lightweight）控件。轻量级控件没有对应的操作系统本地控件，比如大多数 Swing 控件：JLabel 和 JButton。重量级控件则相反，对应于本地控件，比如 AWT 的 Button 和 Label。历史上，在一个窗体里混合使用重量级和轻量级控件存在问题，特别是它们互相重叠的时候。现在，Java 7 中混合使用变得比较方便。</p> <h3 id="不规则和透明窗体"><a href="#不规则和透明窗体" class="header-anchor">#</a> 不规则和透明窗体</h3> <p>Java 7 中正式将创建不规则和透明窗体的 API 引入了公开的 AWT 包。当然，这些很炫的功能需要系统底层图形界面的支持。以下列出了相关 API</p> <ul><li>GraphicsDevice.isWindowTranslucencySupported(WindowTranslucency)</li> <li>GraphicsConfiguration.isTranslucencyCapable()</li> <li>Window.setOpacity(float)</li> <li>Window.setShape(Shape)</li> <li>Window.setBackground(Color)</li></ul> <p>详细内容可以查看教程“<a href="http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html" target="_blank" rel="noopener noreferrer">How to Create Translucent and Shaped Windows<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>”，了解如何使用透明不规则窗体的 API。</p> <h2 id="其他模块"><a href="#其他模块" class="header-anchor">#</a> 其他模块</h2> <h3 id="xml"><a href="#xml" class="header-anchor">#</a> XML</h3> <p>将最新的 XML 组件更新到相关开源实现的稳定版本：JAXP 1.4、JAXB 2.2a、JAX-WS 2.2。</p> <h3 id="java-2d"><a href="#java-2d" class="header-anchor">#</a> Java 2D</h3> <ul><li>对于现代 X11 桌面系统，提供了基于 XRender 的渲染管线。</li> <li>加入了 OpenType/CFF 字体的支持。</li> <li>对 Linux 字体更好的支持，使用 libfontconfig 来选择字体。</li></ul> <h3 id="安全-加密"><a href="#安全-加密" class="header-anchor">#</a> 安全 / 加密</h3> <ul><li><p>椭圆曲线加密算法 (ECC)，提供了一个可移植的标准椭圆曲线加密算法实现，所有的 Java 应用都可以使用椭圆曲线加密算法。</p></li> <li><p>JSSE(SSL/TLS)</p></li> <li><ul><li>在证书链认证中设置关闭弱加密算法，比如 MD2 算法已经被证实不太安全。</li></ul></li> <li><p>增加对 TLS(Transport Layer Security) 1.1 和 1.2 的支持，它们对应的规范分别是 RFC 4346 和 RFC 5246。</p></li> <li><p>SNI(Server Name Indication) 支持，其规范定义在 RFC 4366。</p></li> <li><p>TLS 密钥重新协商机制，RFC 5746。</p></li></ul> <h3 id="数据库连接-jdbc"><a href="#数据库连接-jdbc" class="header-anchor">#</a> 数据库连接 （JDBC）</h3> <p>支持了规范 JDBC 4.1 和 Rowset 1.1。</p> <h2 id="ibm-jdk-7-新特性"><a href="#ibm-jdk-7-新特性" class="header-anchor">#</a> IBM JDK 7 新特性</h2> <p>除了以上提到的 JDK 7 新增规范外，IBM JDK 7 还有其独一无二的新特性。IBM JDK 7 支持更多的 IBM 平台，例如 AIX、z/OS、IBM i 平台，并且在这些 IBM 的软硬件平台上利用了特有硬件指令进行了性能优化，使得 IBM JDK7 搭配 IBM 平台的性能比其它同级别组合要快出不少。此外，在其他同等平台环境下，IBM J9 JVM 也有着出色的性能，并且针对一些特定的情况也做了不少特殊的优化，使得在这些情况下取得比其他 JDK 7 更好的性能。</p> <p>和 OracleJDK 开始引入 G1 垃圾收集器来减少 Full GC 暂停次数一样，IBM JDK7 默认使用分代并发式垃圾收集器（参数是 -Xgcpolicy:gencon）。IBM JDK 7 中还引入了评估版的实时增量垃圾收集策略（参数是 -Xgcpolicy:metronome）来更好地配合 WebSphere RealTime。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>本篇总览简单介绍了 JDK7 的主要新特性。尽管遗憾的是像 Lambda、Jigsaw 和 Coin 中对集合的改进等被迫被推迟到 JDK8，但是可以欣喜得发现，恰如 Java 最初的设计白皮书所说，Java 正在成为一个越来越全面和健壮安全的平台，而其语言又不失简洁明了。在接下来的系列文章中，我们将着重详细介绍 InvokeDynamic、G1、NIO2、Coin 等比较重要的特性，敬请期待。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mynotes/java/Java-Calendar.html" class="prev">
        Java-Calendar
      </a></span> <span class="next"><a href="/mynotes/java/Java-Fork-Join-框架.html">
        Java-Fork-Join-框架
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/mynotes/assets/js/app.f65f9fb1.js" defer></script><script src="/mynotes/assets/js/2.7a2c11e9.js" defer></script><script src="/mynotes/assets/js/10.7ac305b1.js" defer></script>
  </body>
</html>
